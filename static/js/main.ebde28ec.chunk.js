(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{37:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(24),s=n.n(r),o=(n(37),n(30)),i=n(5),u=n(3),l=n(14),p=n(1);function b(e){var t=e.x,n=e.y;return Object(p.jsx)("div",{className:"ball",style:{top:"".concat(n,"%"),left:"".concat(t,"%")}})}var j=n(7),d=n.n(j),f=n(10);function m(){return(m=Object(f.a)(d.a.mark((function e(t,n){var c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://pokeapi.co/api/v2/pokemon/".concat(t));case 3:return c=e.sent,e.next=6,c.json();case 6:a=e.sent,function(e){return"object"===typeof e&&null!==e&&"name"in e&&"height"in e&&"weight"in e&&"base_experience"in e}(a)&&n({name:a.name,height:a.height,weight:a.weight,base_experience:a.base_experience,sprites:a.sprites}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}var h=function(e){var t=Object(c.useState)(!0),n=Object(i.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(),o=Object(i.a)(s,2),u=o[0],l=o[1];return Object(c.useEffect)((function(){var t=!1;return e&&(r(!0),function(e,t){m.apply(this,arguments)}(e,(function(e){t||(l(e),r(!1))}))),function(){t=!0}}),[e]),{isLoading:a,pokemon:u}},v=n(17);function O(e){var t=e.y,n=e.pokemonName,c=e.playerCardType,a=h(n),r=a.isLoading,s=a.pokemon;return r||!s?Object(p.jsx)("div",{className:"".concat(c,"-card"),style:{top:"".concat(t,"%")},children:Object(p.jsx)(v.BallSpinner,{size:70,color:"#6c5b7b"})}):Object(p.jsx)("div",{className:"".concat(c,"-card"),style:{top:"".concat(t,"%")},children:Object(p.jsx)("img",{className:"player-card-image",src:s.sprites.other.dream_world.front_default})})}function x(e){return e>0?e-5:e}function k(e){return e<100?e+5:e}function g(e){var t=e.pokemonOne,n=e.pokemonTwo,a=Object(c.useState)([50,50]),r=Object(i.a)(a,1)[0],s=Object(i.a)(r,2),o=s[0],j=s[1],d=Object(c.useState)(50),f=Object(i.a)(d,2),m=f[0],h=f[1],v=Object(c.useState)(50),g=Object(i.a)(v,2),w=g[0],y=g[1],N=Object(c.useState)(!1),S=Object(i.a)(N,2),C=S[0],E=S[1];return Object(c.useEffect)((function(){var e=null,t=null,n=function(n){n&&!["w","W","s","S"].includes(n.key)||(e&&clearInterval(e),e=null),n&&!["o","O","l","L"].includes(n.key)||(t&&clearInterval(t),t=null)},c=function(n){switch(console.log(n.key),n.key){case"w":case"W":e=e||setInterval((function(){h(x)}),40);break;case"s":case"S":e=e||setInterval((function(){h(k)}),40);break;case"o":case"O":t=t||setInterval((function(){y(x)}),40);break;case"l":case"L":t=t||setInterval((function(){y(k)}),40)}};if(C)return document.addEventListener("keydown",c),document.addEventListener("keyup",n),function(){document.removeEventListener("keydown",c),document.removeEventListener("keyup",n),n()}}),[C]),""==t||""==n?Object(p.jsx)(u.a,{to:"/"}):Object(p.jsxs)("div",{className:"page-wrapper",children:[Object(p.jsx)(l.b,{to:"/",children:Object(p.jsx)("button",{className:"button-close-game",children:"Close game"})}),Object(p.jsx)("h1",{className:"header-text",children:"Pokemons ping-pong"}),Object(p.jsxs)("div",{className:"ui-field",children:[Object(p.jsx)("div",{className:"dotted-line"}),Object(p.jsx)("div",{className:"game-field",children:Object(p.jsx)(b,{x:j,y:o})}),Object(p.jsxs)("div",{className:"cards-wrapper",children:[Object(p.jsx)(O,{y:m,pokemonName:t,playerCardType:"left"}),Object(p.jsx)(O,{y:w,pokemonName:n,playerCardType:"right"})]})]}),Object(p.jsx)("button",{className:"button-start-game ".concat(C?"":"button-visible"),onClick:function(){return E(!0)},children:"Start Game"})]})}n(52);var w=n(18);function y(e){var t=e.name,n=e.onClick,c=e.isSelected,a=h(t),r=a.isLoading,s=a.pokemon;return r||!s?Object(p.jsx)("div",{className:"card-wrapper",children:Object(p.jsx)(v.BallSpinner,{size:200,color:"#f8b195"})}):Object(p.jsxs)("div",{className:"card-wrapper ".concat(c?"selected":""),onClick:n,children:[Object(p.jsxs)("span",{className:"block-span",children:["Name: ",s.name]}),Object(p.jsxs)("span",{className:"block-span",children:["Height: ",s.height]}),Object(p.jsxs)("span",{className:"block-span",children:["Weight: ",s.weight]}),Object(p.jsxs)("span",{className:"block-span",children:["Base experience: ",s.base_experience]}),Object(p.jsx)("img",{className:"pokemon-image",src:s.sprites.other.dream_world.front_default})]})}var N=n(29);function S(e){return C.apply(this,arguments)}function C(){return(C=Object(f.a)(d.a.mark((function e(t){var n,c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://pokeapi.co/api/v2/pokemon?offset=".concat(t*I,"&limit=").concat(I));case 3:return n=e.sent,e.next=6,n.json();case 6:if(c=e.sent,!function(e){return"object"===typeof e&&null!==e&&"count"in e&&"results"in e}(c)){e.next=11;break}return a={count:c.count,results:c.results},e.abrupt("return",a);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:throw new Error("Can't fetch page ".concat(t));case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}var E=function(){var e=Object(f.a)(d.a.mark((function e(t,n,a,r,s){var o,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(c.useEffect)((function(){var e=new Array(a-r.length).fill(r.length).map((function(e,t){return e+t}));s(e)}),[a,r,s]),e.prev=1,o=t.map(function(){var e=Object(f.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t);case 2:return n=e.sent,e.abrupt("return",{pageNumber:t,pokemons:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=5,Promise.all(o);case 5:if(i=e.sent,0!==t.length){e.next=8;break}return e.abrupt("return");case 8:n((function(e){var t,n=Object(w.a)(e),c=Object(N.a)(i);try{for(c.s();!(t=c.n()).done;){var a=t.value,r=a.pokemons,s=a.pageNumber;n[s]?n[s]=r:n.push(r)}}catch(o){c.e(o)}finally{c.f()}return n})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log({e:e.t0});case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n,c,a,r){return e.apply(this,arguments)}}(),I=10,L=Math.floor((Math.round(window.innerHeight/300)+1)/I)+1;function P(e){var t,n=e.selectedPokemons,a=e.onChange,r=Object(c.useState)(L),s=Object(i.a)(r,2),o=s[0],u=s[1],l=Object(c.useState)([]),b=Object(i.a)(l,2),j=b[0],d=b[1],f=Object(c.useState)([]),m=Object(i.a)(f,2),h=m[0],v=m[1],O=Object(c.useRef)(null);!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=Object(c.useState)(),r=Object(i.a)(a,2),s=r[0],o=r[1];Object(c.useEffect)((function(){var t=null===e||void 0===e?void 0:e.current;if(t){var c=new IntersectionObserver((function(e){var t=Object(i.a)(e,1)[0];return o(t)}),{threshold:n});return c.observe(t),function(){return c.disconnect()}}}),[e,n]),Object(c.useEffect)((function(){(null===s||void 0===s?void 0:s.isIntersecting)&&t()}),[null===s||void 0===s?void 0:s.isIntersecting,t])}(O,Object(c.useCallback)((function(){u((function(e){return e+1}))}),[]),0),E(j,v,o,h,d);var x=h.flatMap((function(e){return e.results})).map((function(e){var t=e.name;return Object(p.jsx)(y,{name:t,isSelected:n.includes(t),onClick:function(){return function(e){var t=n.indexOf(e),c=Object(w.a)(n);t>-1?c.splice(t,1):(c.push(e),c.length>2&&c.shift()),a(c)}(t)}},t)}));return h.length*I<(null===(t=h[0])||void 0===t?void 0:t.count)||void 0===h[0]?Object(p.jsxs)("div",{className:"pokemon-list-wrapper",children:[x,Object(p.jsx)("div",{ref:O,className:"bottom-ref-element"})]}):Object(p.jsx)("div",{className:"pokemon-list-wrapper",children:x})}function _(e){var t=e.selectedPokemons,n=e.onChangePokemons;return Object(p.jsxs)("div",{className:"page-wrapper",children:[Object(p.jsx)("h1",{className:"header-text",children:"Choose two pokemons"}),Object(p.jsx)(P,{selectedPokemons:t,onChange:n}),Object(p.jsx)(l.b,{to:"/game/".concat(t[0],"/").concat(t[1]),children:Object(p.jsx)("button",{className:"button-start-game ".concat(2!==t.length||t.includes("")?"":"button-visible"),children:"Start Game"})})]})}function T(){var e=Object(c.useState)(["",""]),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(p.jsx)("div",{className:"App",children:Object(p.jsx)(l.a,{children:Object(p.jsxs)(u.d,{children:[Object(p.jsx)(u.b,{exact:!0,path:"/game/:pokemonOne/:pokemonTwo",render:function(e){var t=e.match;return Object(p.jsx)(g,Object(o.a)({},t.params))}}),Object(p.jsx)(u.b,{path:"/",render:function(){return Object(p.jsx)(_,{selectedPokemons:n,onChangePokemons:a})}})]})})})}var B=function(){var e=Object(f.a)(d.a.mark((function e(t){var c,a,r,s,o,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&t instanceof Function)){e.next=14;break}return e.next=3,n.e(3).then(n.bind(null,54));case 3:c=e.sent,a=c.getCLS,r=c.getFID,s=c.getFCP,o=c.getLCP,i=c.getTTFB,a(t),r(t),s(t),o(t),i(t);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();s.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(T,{})}),document.getElementById("root")),B()}},[[53,1,2]]]);
//# sourceMappingURL=main.ebde28ec.chunk.js.map